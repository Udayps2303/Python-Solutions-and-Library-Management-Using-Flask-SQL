cat > templates/check_availability.html <<'EOF'
{% extends "layout.html" %}
{% block content %}
  <h2>Check Availability</h2>
  <form method="post">
    <label>Title
      <input type="text" name="title">
    </label>
    <label>Author
      <input type="text" name="author">
    </label>
    <input type="submit" value="Search">
  </form>

  {% if results %}
    <h3>Search results</h3>
    <table>
      <tr><th>Title</th><th>Author</th><th>Serial</th><th>Available</th><th>Select</th></tr>
      {% for r in results %}
        <tr>
          <td>{{ r.title }}</td>
          <td>{{ r.author }}</td>
          <td>{{ r.serial_no }}</td>
          <td>{{ 'Yes' if r.available else 'No' }}</td>
          <td>
            {% if r.available %}
              <a href="{{ url_for('issue_book', book_id=r.id) }}">Issue</a>
            {% else %}
              Not available
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
  {% endif %}
{% endblock %}
EOF
