cat > templates/layout.html <<'EOF'
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Library Management</title>
  <style>
    body { font-family: Arial, sans-serif; margin:20px; }
    .top { margin-bottom: 15px; }
    .flash { padding:8px; border-radius:4px; margin-bottom:10px; }
    .danger{background:#f8d7da;color:#842029}
    .success{background:#d1e7dd;color:#0f5132}
    .info{background:#cff4fc;color:#055160}
    .card { border:1px solid #ccc; padding:12px; border-radius:6px; margin-bottom:12px; }
    label { display:block; margin-top:8px; }
    input[type=text], input[type=date], select { padding:6px; width:250px; }
    input[type=submit], button { padding:8px 12px; margin-top:10px; }
    table { border-collapse:collapse; width:100%; margin-top:10px; }
    th, td { border:1px solid #ccc; padding:6px; text-align:left; }
  </style>
</head>
<body>
  <div class="top">
    {% if session.username %}
      Logged in as <strong>{{ session.username }}</strong> ({{ session.role }}) |
      <a href="{{ url_for('home') }}">Home</a> |
      <a href="{{ url_for('reports') }}">Reports</a> |
      <a href="{{ url_for('check_availability') }}">Transactions</a> |
      {% if session.role == 'admin' %}
        <a href="{{ url_for('maintenance') }}">Maintenance</a> |
      {% endif %}
      <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
      <a href="{{ url_for('login') }}">Login</a>
    {% endif %}
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="flash {{category}}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  {% block content %}{% endblock %}
</body>
</html>
EOF

